<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!--[if lt IE 9]>
<script th:src="@{/backend/js/html5.js}"  type="text/javascript" src="js/html5.js"></script>
<script th:src="@{/backend/js/respond.min.j}" type="text/javascript" src="js/respond.min.js"></script>
<script th:src="@{/backend/js/PIE_IE678.js}" type="text/javascript" src="js/PIE_IE678.js"></script>
<![endif]-->
<link th:href="@{/backend/assets/css/bootstrap.min.css}" href="assets/css/bootstrap.min.css" rel="stylesheet" />
<link th:href="@{/backend/css/style.css}" rel="stylesheet" href="css/style.css"/>
<link th:href="@{/backend/assets/css/codemirror.css}" href="assets/css/codemirror.css" rel="stylesheet">
<link th:href="@{/backend/assets/css/ace.min.css}" rel="stylesheet" href="assets/css/ace.min.css" />
      <link th:href="@{/backend/Widget/zTree/css/zTreeStyle/zTreeStyle.css}" rel="stylesheet" href="Widget/zTree/css/zTreeStyle/zTreeStyle.css" type="text/css">
<link th:href="@{/backend/assets/css/font-awesome.min.css}" rel="stylesheet" href="assets/css/font-awesome.min.css" />
<!--[if IE 7]>
		  <link th:href="@{/backend/assets/css/font-awesome-ie7.min.css}" rel="stylesheet" href="assets/css/font-awesome-ie7.min.css" />
		<![endif]-->
<link th:href="@{/backend/Widget/icheck/icheck.css}" href="Widget/icheck/icheck.css" rel="stylesheet" type="text/css" />
<link th:href="@{/backend/Widget/webuploader/0.1.5/webuploader.css}" href="Widget/webuploader/0.1.5/webuploader.css" rel="stylesheet" type="text/css" />

<title>新增图片</title>
</head>
<body>
<div class="clearfix" id="add_picture">
<div id="scrollsidebar" class="left_Treeview">
    <div class="show_btn" id="rightArrow"><span></span></div>
    <div class="widget-box side_content" >
    <div class="side_title"><a title="隐藏" class="close_btn"><span></span></a></div>
     <div class="side_list">
      <div class="widget-header header-color-green2">
          <h4 class="lighter smaller">选择产品类型</h4>
      </div>
      <div class="widget-body">
          <div class="widget-main padding-8">
              <div  id="treeDemo" class="ztree"></div>
          </div>
  </div>
  </div>
  </div>  
  </div>
   <div class="page_right_style">
   <div class="type_title">添加商品</div>
	<form action="" onsubmit="return false" method="post" class="form form-horizontal" id="form-article-add">
		<div class=" clearfix cl">
         <label class="form-label col-2">简略标题：</label>
	     <div class="formControls col-10"><input type="text" required="required" class="input-text" value="" placeholder="" id="" name="title"></div>
		</div>
		<div class=" clearfix cl">
			
			<div class="Add_p_s">
            <label class="form-label col-2">产品编号：</label>
			<div class="formControls col-2"><input type="number" required="required" class="input-text" value="" placeholder="" id="" name="id"></div>
            </div>

			<div class="Add_p_s">
				<label class="form-label col-2">库存数量：</label>
				<div class="formControls col-2"><input type="number" required="required" class="input-text" value="" placeholder="" id="" name="num"></div>
			</div>

            <div class="Add_p_s">
             <label class="form-label col-2">类&nbsp;&nbsp;&nbsp;&nbsp;别：</label>
			 <div class="formControls col-2">
				 <span class="select-box">
				<select required="required" name="cid"  id="cate" class="select">
				</select>
				</span>
			 </div>
			</div>
             <div class="Add_p_s">
             <label class="form-label col-2">产品重量：</label>	
			 <div class="formControls col-2"><input required="required" type="number" class="input-text" value="" placeholder="" id="" name="" >kg</div>
			</div>
             <div class="Add_p_s">
             <label class="form-label col-2">上下架：</label>
			 <div class="formControls col-2"><span class="select-box">
				<select required="required" name="status" class="select">
					<option selected="selected" value="1">上架</option>
					<option value="0">下架</option>
				</select>
				</span></div>
			</div>
            <div class="Add_p_s">
             <label class="form-label col-2">价格：</label>
			 <div class="formControls col-2"><input required="required" type="number" class="input-text" value="" placeholder="" id=""
													name="price" >元</div>
			</div>

			
		</div>
		

		<div class="clearfix cl">
			<label class="form-label col-2">内容摘要：</label>
			<div class="formControls col-10">
				<textarea required="required" name="sellPoint" cols="" rows="" class="textarea"  placeholder="说点什么...最少输入10个字符" datatype="*10-100" dragonfly="true" nullmsg="备注不能为空！" onKeyUp="textarealength(this,200)"></textarea>
				<p class="textarea-numberbar"><em class="textarea-length">0</em>/200</p>
			</div>
		</div>
		
		<div class="clearfix cl">
			<label class="form-label col-2">图片上传：</label>
			<div class="formControls col-10">
				<input id="pic" type="file" required="required" name="pic"/>
			</div>
		</div>
		<div class="clearfix cl">
			<div class="Button_operation">
				<button onClick="submit2()" class="btn btn-primary radius" type="button"><i class="icon-save "></i>提交并保存</button>
				<button onClick="cancel2();" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消并返回&nbsp;&nbsp;</button>
			</div>
		</div>
	</form>
    </div>
</div>
</div>
<script th:src="@{/backend/js/jquery-1.9.1.min.js}" src="js/jquery-1.9.1.min.js"></script>
<script th:src="@{/backend/assets/js/bootstrap.min.js}" src="assets/js/bootstrap.min.js"></script>
<script th:src="@{/backend/assets/js/typeahead-bs2.min.js}" src="assets/js/typeahead-bs2.min.js"></script>
<script th:src="@{/backend/assets/layer/layer.js}" src="assets/layer/layer.js" type="text/javascript" ></script>
<script th:src="@{/backend/assets/laydate/laydate.js}" src="assets/laydate/laydate.js" type="text/javascript"></script>
<script th:src="@{/backend/Widget/My97DatePicker/WdatePicker.js}" type="text/javascript" src="Widget/My97DatePicker/WdatePicker.js"></script>
<script th:src="@{/backend/Widget/icheck/jquery.icheck.min.js}" type="text/javascript" src="Widget/icheck/jquery.icheck.min.js"></script>
 <script th:src="@{/backend/Widget/zTree/js/jquery.ztree.all-3.5.min.js}" type="text/javascript" src="Widget/zTree/js/jquery.ztree.all-3.5.min.js"></script>
<script th:src="@{/backend/Widget/Validform/5.3.2/Validform.min.js}" type="text/javascript" src="Widget/Validform/5.3.2/Validform.min.js"></script>
<script th:src="@{/backend/Widget/webuploader/0.1.5/webuploader.min.js}" type="text/javascript" src="Widget/webuploader/0.1.5/webuploader.min.js"></script>
<script th:src="@{/backend/Widget/ueditor/1.4.3/ueditor.config.js}" type="text/javascript" src="Widget/ueditor/1.4.3/ueditor.config.js"></script>
<script th:src="@{/backend/Widget/ueditor/1.4.3/ueditor.all.min.js}" type="text/javascript" src="Widget/ueditor/1.4.3/ueditor.all.min.js"> </script>
<script th:src="@{/backend/Widget/ueditor/1.4.3/lang/zh-cn/zh-cn.js}" type="text/javascript" src="Widget/ueditor/1.4.3/lang/zh-cn/zh-cn.js"></script>
<script th:src="@{/backend/js/lrtk.js}" src="js/lrtk.js" type="text/javascript" ></script>
<script th:src="@{/backend/js/H-ui.js}" type="text/javascript" src="js/H-ui.js"></script>
<script th:src="@{/backend/js/H-ui.admin.js}" type="text/javascript" src="js/H-ui.admin.js"></script>
<script  type="text/javascript" th:src="@{/backend/js/ajaxfileupload.js}" src="js/H-ui.admin.js"></script>
<script th:inline="javascript">

	/*<![CDATA[*/

    $.fn.serializeObject = function()
    {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
            if (o[this.name]) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    };


    var cates;
    function queryAllCate(){
        $.ajax({
            url:getURLPath()+"queryCateList",
            data:"",
            dataType:"json",
            type:"post",
            success:function(data){
                cates=data;
                var options="";
                $.each(cates, function(index,item){
                    console.log(item);
                    options+="<option value='"+item.id+"'>"+item.name+"</option>";
                });

                $("#cate").html(options);
            },
            error:function(){

            }
        });
    }
    function  getURLPath() {
        var contextPath=[[${#httpServletRequest.getScheme()}]]+"://"+[[${#httpServletRequest.getServerName()}]] + ":"+ [[ ${#httpServletRequest.getServerPort()}]]  + [[${#httpServletRequest.getContextPath()}]] + "/";
        return contextPath;
    }

   function  cancel2(){
        window.location.hre=getURLPath()+"item_list";
   }

    function submit2() {
       alert("sadsad");
//        $.ajax({
//            //几个参数需要注意一下
//            type: "POST",//方法类型
//            dataType: "json",//预期服务器返回的数据类型
//            url: getURLPath()+"/item/addItem" ,//url
//            data: $('#form-article-add').serialize(),
//            success: function (result) {
//                console.log(result);//打印服务端返回的数据(调试用)
//                if (result.result == "1") {
//                    window.location.href=getURLPath()+"item_list";
//                }
//                if (result.result == "0") {
//                    window.location.href=getURLPath()+"add_item";
//                }
//                ;
//            },
//            error : function() {
//                alert("服务器繁忙 请稍后再试...");
//            }
//        });

//        var para = $('#form-article-add').serializeObject() ;
//        alert(para);
//        para = JSON.stringify(para) ;
//        alert(para);
//        var data = { title: '测试', price: 12,sellPoint:'测试简介' }
        var data ={};
        $("#form-article-add :input").each(function(){data[this.name]=this.value});
        $.ajaxFileUpload({
                url:getURLPath()+"item/addItem",
                type:"post",
                fileElementId:"pic",
                data:data,
                dataType:"json",
                success: function (result) {
                console.log(result);//打印服务端返回的数据(调试用)
                if (result.result == "1") {
                    window.location.href=getURLPath()+"item_list";
                }
                if (result.result == "0") {
                    alert("上传失败！");
                    window.location.href=getURLPath()+"add_item";
                }
                ;
            },
            error : function() {
                alert("服务器繁忙 请稍后再试...");
            }

            });
    }

    $(function() {
        //初始化宽度、高度
        queryAllCate();
        $(".widget-box").height($(window).height());
        $(".page_right_style").height($(window).height());
        $(".page_right_style").width($(window).width()-220);
        //当文档窗口发生改变时 触发
        $(window).resize(function(){

            $(".widget-box").height($(window).height());
            $(".page_right_style").height($(window).height());
            $(".page_right_style").width($(window).width()-220);
        });
});


/*<![CDATA[*/
</script>
</body>
</html>